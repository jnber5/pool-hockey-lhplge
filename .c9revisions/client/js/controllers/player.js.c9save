{"ts":1378502771395,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1378502819299,"patch":[[{"diffs":[[1,"'use strict';\n\nangular.module('angular-client-side-auth')\n.controller('PlayerAddCtrl',\n['$rootScope', '$scope', '$location', 'Players', function($rootScope, $scope, $location, Players) {\n   \n    $scope.addPlayer = function () {\n        Players.add({\n            firstName: $scope.firstName,\n            lastName: $scope.lastName\n        },\n            function (res) {\n                $location.path('/player/edit/' + res._id);\n            },\n            function (err) {\n                $rootScope.error = \"Une erreur est survenue lors de l'ajout. Le détail de l'erreur a été journalisé.\";\n            });\n    };\n\n}]);\n\n'use strict';\n\nangular.module('angular-client-side-auth')\n.controller('PlayerEditCtrl',\n['$routeParams', '$rootScope', '$scope', 'Players', 'Teams', 'Domains', function($routeParams, $rootScope, $scope, Players, Teams, Domains) {\n    \n    $scope.mode = 'edit';\n    $scope.historyEndDate = '9999-12-31';\n    $scope.historyStartDate = '2013-07-01';\n    $scope.salaryStartDate = '2013-07-01';\n    $scope.salaryEndDate = '2014-06-30';\n    \n    Players.get({id: $routeParams.id}, function(res){\n        $scope.player = res;\n        if (res.salaries){\n            $scope.showSalary = false;\n        }else{\n            $scope.showSalary = true;\n        }\n    }, function(err){\n        $rootScope.error = \"Failed to fetch Player.\";\n    });\n    \n    Teams.getAll(function(res){\n       $scope.teams = res; \n    }, function(err){\n        $rootScope.error = \"Failed to fetch teams.\";\n    });\n    \n    Domains.get({name: 'Position'}, function(res){\n        $scope.positions = res;\n    }, function(err){\n        $rootScope.error = \"Failed to fetch Domains.\";\n    });\n    \n    $scope.convertDate = function (dt) {\n        if (dt) {\n            var localDate = new Date(dt);\n            var localTime = localDate.getTime();\n            var localOffset = localDate.getTimezoneOffset() * 60000;\n            return new Date(localTime + localOffset);\n        }\n    };\n    \n    $scope.addPlayerHistory = function () {\n        Players.addHistory({\n            playerId: $routeParams.id,\n            team: $scope.team._id,\n            position: $scope.position.code,\n            number: $scope.number,\n            startDate: $scope.historyStartDate,\n            endDate: $scope.historyEndDate,\n        },\n            function (res) {\n                $scope.player = res;\n                $rootScope.error = '';\n                $scope.team = '';\n                $scope.position = '';\n                $scope.number = '';\n                $scope.historyStartDate = '';\n            },\n            function (err) {\n                $rootScope.error = \"Une erreur est survenue lors de l'ajout. Le détail de l'erreur a été journalisé.\";\n            });\n    };\n\n   $scope.endPlayerHistory = function (playerHistoryId, histEndDate) {\n        \n        Players.endHistory({\n            playerHistoryId: playerHistoryId,\n            historyEndDate: histEndDate\n        },\n            function (res) {\n                $scope.player = res;\n                $rootScope.error = '';\n            },\n            function (err) {\n                $rootScope.error = \"Une erreur est survenue lors de l'ajout. Le détail de l'erreur a été journalisé.\";\n            });\n    };\n\n    $scope.addPlayerSalary = function () {\n        Players.addSalary({\n            playerId: $routeParams.id,\n            caphit: $scope.caphit,\n            startDate: $scope.salaryStartDate,\n            endDate: $scope.salaryEndDate,\n        },\n            function (res) {\n                $scope.player = res;\n                $rootScope.error = '';\n                $scope.team = '';\n                $scope.position = '';\n                $scope.number = '';\n                $scope.historyStartDate = '';\n            },\n            function (err) {\n                $rootScope.error = \"Une erreur est survenue lors de l'ajout. Le détail de l'erreur a été journalisé.\";\n            });\n    };\n\n}]);"]],"start1":0,"start2":0,"length1":0,"length2":3943}]],"length":3943,"saved":false}
{"contributors":[],"silentsave":false,"ts":1378776708930,"patch":[[{"diffs":[[0,"ent-side-auth')\n"],[1,".controller('PlayersCtrl',\n['$rootScope', '$scope', 'Players', function($rootScope, $scope, Players) {\n    $scope.loading = true;\n    \n    Players.getAll(function(res) {\n        $scope.players = res;\n        $scope.loading = false;\n    }, function(err) {\n        $rootScope.error = \"Failed to fetch users.\";\n        $scope.loading = false;\n    });\n}])\n"],[0,".controller('Pla"]],"start1":42,"start2":42,"length1":32,"length2":384},{"diffs":[[0,"\n}])"],[-1,";\n\n'use strict';\n\nangular.module('angular-client-side-auth')"],[0,"\n.co"]],"start1":966,"start2":966,"length1":68,"length2":8}]],"length":4235,"saved":false}
{"ts":1378776727712,"patch":[[{"diffs":[[0,"    });\n}])\n"],[1,".controller('AgentsLibresCtrl',\n['$rootScope', '$scope', 'Players', function($rootScope, $scope, Players) {\n    $scope.loading = true;\n    \n    Players.getAll(function(res) {\n        $scope.players = res;\n        $scope.loading = false;\n    }, function(err) {\n        $rootScope.error = \"Failed to fetch users.\";\n        $scope.loading = false;\n    });\n}])\n"],[0,".controller("]],"start1":398,"start2":398,"length1":24,"length2":381}]],"length":4592,"saved":false}
{"ts":1378776741286,"patch":[[{"diffs":[[0,"ope', 'Players',"],[1," 'Contrats',"],[0," function($rootS"]],"start1":461,"start2":461,"length1":32,"length2":44},{"diffs":[[0," $scope, Players"],[1,", Contrats"],[0,") {\n    $scope.l"]],"start1":510,"start2":510,"length1":32,"length2":42}]],"length":4614,"saved":false}
{"ts":1378776753637,"patch":[[{"diffs":[[0," 'Contra"],[1,"c"],[0,"ts', fun"]],"start1":477,"start2":477,"length1":16,"length2":17},{"diffs":[[0,", Contra"],[1,"c"],[0,"ts) {\n  "]],"start1":527,"start2":527,"length1":16,"length2":17}]],"length":4616,"saved":false}
{"ts":1378776887656,"patch":[[{"diffs":[[0," false;\n    });\n"],[1,"    \n    Contracts.getAllNow(function(res) {\n        $scope.players = res;\n        $scope.loading = false;\n    }, function(err) {\n        $rootScope.error = \"Failed to fetch users.\";\n        $scope.loading = false;\n    });\n    \n"],[0,"}])\n.controller("]],"start1":771,"start2":771,"length1":32,"length2":260}]],"length":4844,"saved":false}
{"ts":1378776919552,"patch":[[{"diffs":[[0,"tAllNow("],[1,"{\n          dateConsultation: Date.now()},"],[0,"function"]],"start1":808,"start2":808,"length1":16,"length2":58}]],"length":4886,"saved":false}
{"ts":1378776927566,"patch":[[{"diffs":[[0,"te.now()"],[1,"\n          "],[0,"},"],[1," "],[0,"function"]],"start1":848,"start2":848,"length1":18,"length2":30}]],"length":4898,"saved":false}
{"ts":1378776945934,"patch":[[{"diffs":[[0,"es;\n"],[-1,"        $scope.loading = false;\n"],[0,"    "]],"start1":635,"start2":635,"length1":40,"length2":8},{"diffs":[[0,"function(err) {\n"],[1,""],[0,"        $rootSco"]],"start1":646,"start2":646,"length1":32,"length2":32},{"diffs":[[0,".\";\n"],[-1,"        $scope.loading = false;\n"],[0,"    "]],"start1":711,"start2":711,"length1":40,"length2":8},{"diffs":[[0,"\n        $scope."],[-1,"player"],[1,"contract"],[0,"s = res;\n       "]],"start1":821,"start2":821,"length1":38,"length2":40}]],"length":4836,"saved":false}
{"ts":1378776978908,"patch":[[{"diffs":[[0,"Failed to fetch "],[-1,"us"],[1,"play"],[0,"ers.\";\n    });\n "]],"start1":690,"start2":690,"length1":34,"length2":36},{"diffs":[[0,"Failed to fetch "],[-1,"user"],[1,"contract"],[0,"s.\";\n        $sc"]],"start1":939,"start2":939,"length1":36,"length2":40}]],"length":4842,"saved":false}
{"contributors":[],"silentsave":false,"ts":1378777644758,"patch":[[{"diffs":[[0,"tAll"],[-1,"Now"],[0,"({\n "]],"start1":746,"start2":746,"length1":11,"length2":8}]],"length":4839,"saved":false}
{"contributors":[],"silentsave":false,"ts":1378778179501,"patch":[[{"diffs":[[0,"yers = res;\n    "],[-1,""],[0,""],[1,"    $scope.loading = false;\n    "],[0,"}, function(err)"]],"start1":627,"start2":627,"length1":32,"length2":64},{"diffs":[[0," players.\";\n"],[1,"        $scope.loading = false;\n"],[0,"    });\n    "]],"start1":737,"start2":737,"length1":24,"length2":56},{"diffs":[[0,"        "],[-1,"  "],[0,"dateCons"]],"start1":817,"start2":817,"length1":18,"length2":16},{"diffs":[[0,"e.now()\n"],[-1,"  "],[0,"        "]],"start1":846,"start2":846,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1," $scope.loading = false;"],[0,"\n   "]],"start1":916,"start2":916,"length1":32,"length2":8},{"diffs":[[0,".\";\n"],[-1,"        $scope.loading = false;\n"],[0,"    "]],"start1":997,"start2":997,"length1":40,"length2":8}]],"length":4843,"saved":false}
{"ts":1378783918745,"patch":[[{"diffs":[[0,"ng = true;\n    \n"],[1,"    $scope.predicate = ['position','-capHit'];\n    \n"],[0,"    Players.getA"]],"start1":558,"start2":558,"length1":32,"length2":84}]],"length":4895,"saved":false}
{"ts":1378783927507,"patch":[[{"diffs":[[0,"ing = true;\n"],[-1,"    \n"],[0,"    $scope.p"]],"start1":557,"start2":557,"length1":29,"length2":24},{"diffs":[[0,"= ['"],[-1,"position','"],[0,"-cap"]],"start1":590,"start2":590,"length1":19,"length2":8}]],"length":4879,"saved":false}
{"ts":1378784435850,"patch":[[{"diffs":[[0,"pHit'];\n"],[1,"    $scope.durees = ['1', '2', '3']\n"],[0,"    \n   "]],"start1":597,"start2":597,"length1":16,"length2":52}]],"length":4915,"saved":false}
{"ts":1378784437619,"patch":[[{"diffs":[[0,"2', '3']"],[1,";"],[0,"\n    \n  "]],"start1":632,"start2":632,"length1":16,"length2":17}]],"length":4916,"saved":false}
{"ts":1378784572683,"patch":[[{"diffs":[[0,"    });\n"],[1,"    \n"],[0,"}])\n.con"]],"start1":398,"start2":398,"length1":16,"length2":21},{"diffs":[[0,"tracts',"],[1," 'Teams', 'Domains',"],[0," functio"]],"start1":487,"start2":487,"length1":16,"length2":36},{"diffs":[[0,"ontracts"],[1,", Teams, Domains"],[0,") {\n    "]],"start1":555,"start2":555,"length1":16,"length2":32},{"diffs":[[0,"\";\n    });\n    \n"],[1,"    Teams.getAll(function(res){\n       $scope.teams = res; \n    }, function(err){\n        $rootScope.error = \"Failed to fetch teams.\";\n    });\n    \n    Domains.get({name: 'Position'}, function(res){\n        $scope.positions = res;\n    }, function(err){\n        $rootScope.error = \"Failed to fetch Domains.\";\n    });\n    \n"],[0,"}])\n.controller("]],"start1":1112,"start2":1112,"length1":32,"length2":353}]],"length":5278,"saved":false}
{"ts":1378788416747,"patch":[[{"diffs":[[0," '2', '3'];\n"],[1,"    $scope.query = {};\n"],[0,"    \n    Pla"]],"start1":671,"start2":671,"length1":24,"length2":47}]],"length":5301,"saved":false}
{"ts":1378788446385,"patch":[[{"diffs":[[0,"'];\n"],[-1,"    $scope.query = {};\n    "],[0,"\n   "]],"start1":679,"start2":679,"length1":35,"length2":8}]],"length":5274,"saved":false}
{"contributors":[],"silentsave":false,"ts":1378825152477,"patch":[[{"diffs":[[0,"le('"],[-1,"angular-client-side-auth"],[1,"lhplge"],[0,"')\n."]],"start1":27,"start2":27,"length1":32,"length2":14}]],"length":5256,"saved":false}
