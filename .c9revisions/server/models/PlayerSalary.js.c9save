{"ts":1378239648429,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1378239662258,"patch":[[{"diffs":[[1,"var mongoose = require('mongoose'),\r\n    Schema = mongoose.Schema,\r\n\r\nvar playerSalarySchema = Schema({\r\n    _creator: { type: String, ref: 'Player' },\r\n    caphit: { type: Number, required: true },\r\n    startDate: { type: Date, required: true },\r\n    endDate: { type: Date, required: true },\r\n});\r\nvar PlayerSalary = mongoose.model('PlayerSalary', playerSalarySchema);"]],"start1":0,"start2":0,"length1":0,"length2":369}]],"length":369,"saved":false}
{"ts":1378239685115,"patch":[[{"diffs":[[0,"e.Schema"],[-1,","],[1,";"],[0,"\r\n\r\nvar "]],"start1":57,"start2":57,"length1":17,"length2":17},{"diffs":[[0,",\r\n});\r\n"],[1,"\r\n"],[0,"var Play"]],"start1":291,"start2":291,"length1":16,"length2":18}]],"length":371,"saved":false}
{"ts":1378239715094,"patch":[[{"diffs":[[0,"Schema);"],[1,"\r\n\r\nmodule.exports = {\r\n    PlayerSalary: PlayerSalary\r\n};"]],"start1":363,"start2":363,"length1":8,"length2":66}]],"length":429,"saved":false}
{"contributors":[],"silentsave":false,"ts":1378424574501,"patch":[[{"diffs":[[0,"e.Schema"],[1,",\r\n    Player = require('./Player').Player,\r\n    PlayerHistory = require('./PlayerHistory').PlayerHistory,\r\n    Team = require('./Team').Team"],[0,";\r\n\r\nvar"]],"start1":57,"start2":57,"length1":16,"length2":157},{"diffs":[[0,"erSalary"],[1,", \r\n    \r\n    add : function(req, res, next){\r\n            var playerSalary = new PlayerSalary({\r\n            _creator: req.body.playerId,\r\n            caphit: req.body.caphit,\r\n            startDate: req.body.startDate,\r\n            endDate: req.body.endDate,\r\n        });\r\n    \r\n        playerSalary.save(function (err) {\r\n            if (err) {\r\n                console.log(err);\r\n                next(err);\r\n            } else {\r\n                var player = Player.findById(req.body.playerId, function (err, player) {\r\n                    player.salaries.push(playerSalary);\r\n                    player.save(function (err) {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            next(err);\r\n                        } else {\r\n                            Player.findById(req.body.playerId).lean().populate('histories').populate('salaries').exec(function (err, player) {\r\n                                PlayerHistory.populate(player, {\r\n                                    path: 'histories.team',\r\n                                    model: Team\r\n                                }, function (err, player) {\r\n                                    res.json(player);\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    }"],[0,"\r\n};"]],"start1":558,"start2":558,"length1":12,"length2":1412}]],"length":1970,"saved":false}
{"ts":1378424626024,"patch":[[{"diffs":[[0,"    "],[-1," var player ="],[0," Pla"]],"start1":1011,"start2":1011,"length1":21,"length2":8}]],"length":1957,"saved":false}
